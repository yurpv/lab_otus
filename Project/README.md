# Проектная работа
## Инфраструктура для проекта на Nextcloud

Для лабораторных работ использую Macbook Air M2 чипсет amr64, OS Sonoma 14.6.1, система виртуализации VMware Fusion, при выполнении лабораторной работы использовал образ vagrantbox bento/ubuntu-22.04.

## Требования:

Веб проект с развертыванием нескольких виртуальных машин должен отвечать следующим требованиям:
* включен https;
* основная инфраструктура в DMZ зоне;
* файрвалл на входе;
* сбор метрик и настроенный алертинг;
* везде включен selinux;
* организован централизованный сбор логов.


## Проект

Схема стенда

![Project work Diagram drawio (6)](https://github.com/user-attachments/assets/2d2a81a4-2d75-4bf7-87b2-54f78847af09)


### Состав проекта

- Всего: 8 хостов. 
- Метод разворачивания: Ansible.
- На хостах включен файрвол (Firewalld):
	- Настроены необходимые службы и порты.
- На хостах включен SELinux:
	- Настроены необходимые контексты.
- Все хосты выходят из локальной сети через хост Router.


> Данное решение не является продакшн решением, а несет смысл демонстрации знаний полученных на курсе. 

> В данном проекте не рассмотрены проблемы отказоустойчивости.

### Хосты

Name | IP адрес
------| ---------
Router | 192.168.255.10
WEB ) | 192.168.255.20
MySQL (MASTER) | 192.168.255.30
MySQL (SLAVE) | 192.168.255.31
Barman (ELK) | 192.168.255.40
Server log (Syslog) | 192.168.255.50
Monitoring (Srvmon) | 192.168.10.90


Для разворачивания стенда выполняем `vagrant up`. Для разворачивания хостов подготовлен Ansible playbook. В playbook ипортируются роли, каждая роль разворачивает определенную службу (11 ролей).


Параметры для Zabbix:

Хосты | Hostname
------| ---------
Router | router
WEB | web
Postgresql Master | mysqlmaster
Postgresql  | mysqlslave
Syslog | syslog
Backup | Barman

### Доступ к службам

> Для доступа к веб-проекту на Wordpress необходимо на хост машине прописать адрес роутера (Router): `192.168.10.10 dimkaspaun.ru`.

Сервис | Адрес
------| ---------
Wordpress (Nginx+PHP-FPM) | https://192.168.10.20 (https://dimkaspaun.ru)
ELK | http://192.168.10.40:5601
Zabbix | http://192.168.10.50/zabbix
