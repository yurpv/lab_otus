# Домашнее задание Резервное копирование

## Цели домашнего задания

- Научиться настраивать резервное копирование с помощью утилиты Borg.

 > Для лабораторных работ использую Mac OS (m1), система виртуализации vmware Fusion, при выполнении лабораторной работы использовал образ vagrantbox bento/ubuntu-24.04.

## Описание домашнего задания

- Настроить стенд Vagrant с двумя виртуальными машинами: backup_server и client.
- Настроить удаленный бэкап каталога /etc c сервера client при помощи borgbackup.
- Резервные копии должны соответствовать следующим критериям:
> Директория для резервных копий /var/backup. Это должна быть отдельная точка монтирования. В данном случае для демонстрации размер не принципиален, достаточно будет и 2GB.</br> 
Репозиторий для резервных копий должен быть зашифрован ключом или паролем - на усмотрение студента;
имя бэкапа должно содержать информацию о времени снятия бекапа.</br>
Глубина бекапа должна быть год, хранить можно по последней копии на конец месяца, кроме последних трех.</br>
Последние три месяца должны содержать копии на каждый день.</br>
Резервная копия снимается каждые 5 минут. Такой частый запуск в целях демонстрации;
Написан скрипт для снятия резервных копий. Скрипт запускается из соответствующей Cron джобы, либо systemd timer-а - на усмотрение студента.
Настроено логирование процесса бекапа. Для упрощения можно весь вывод перенаправлять в logger с соответствующим тегом. Если настроите не в syslog, то обязательна ротация логов.

Формат сдачи ДЗ - vagrant + ansible

## Пошаговая инструкция выполнения домашнего задания

### Создаём виртуальные машины

- Создаём каталог, в котором будут храниться настройки виртуальной машины. В каталоге создаём файл с именем [Vagrantfile](./Vagrantfile)
- Результатом выполнения команды vagrant up станут 2 созданные виртуальные машины backup и client.
- Заходим на сервере backup как правильно отработал playbook.
> Дальнейшие действия выполняются от пользователя root
```
vagrant ssh backup
vagrant@backup:~$ sudo -i
 
```
